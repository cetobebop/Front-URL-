import{Q as B}from"./QPage.86ece640.js";import{af as v,ag as h,Y as d,Z as y,$ as m,a0 as c,ah as E,ai as b,a4 as L,a3 as x,aj as F,a8 as p,ak as I,al as C,r as g,am as D,a9 as Q,an as P,ao as T,o as z,ap as H,aa as N,ab as R,ac as U,a2 as w}from"./index.e35560c2.js";import{u as S,Q as j,a as q}from"./QForm.a5dec8dd.js";const A=(n,e)=>e.filter(a=>a._id!==n),M=()=>({errorNotify:a=>{v.create({message:a,color:"red"})},successNotify:a=>{v.create({message:a,color:"green"})}}),O=async n=>{try{await navigator.clipboard.writeText(n)}catch(e){console.log(e)}},Y={class:"text-overline"},Z={__name:"LinkCard",props:{link:Object},setup(n){const e=n,{dialogPromp:a,dialogConfirm:i}=S(),{errorNotify:s,successNotify:u}=M(),o=h();async function k(l){var t;try{C.show(),await o.updateLink(e.link._id,l),o.links=o.links.map(r=>e.link._id===r._id?{...r,longLink:l}:r),u("se ha actualizado correctamente")}catch(r){s((t=r==null?void 0:r.errors[0])==null?void 0:t.msg)}finally{C.hide()}}function f(){a("\xBFdesea actualizar?",e.link.longLink,k)}function _(){i("\xBFDesea eliminar este elemento?",V)}async function V(){var l;try{o.links=A(e.link._id,o.links);const t=await o.deleteLinks(e.link._id);u("se ha eliminado correctamente")}catch(t){s((l=t==null?void 0:t.errors[0])==null?void 0:l.msg)}}function $(l){const t=`https://front-url.onrender.com/${l}`;O(t),u("copiado con exito")}return(l,t)=>(d(),y(I,{class:"my-card q-mt-sm"},{default:m(()=>[c(E,null,{default:m(()=>[b("div",Y,L(n.link.shortid),1),x(" "+L(n.link.longLink),1)]),_:1}),c(F,null,{default:m(()=>[c(p,{flat:"",round:"",icon:"mdi-trash-can-outline",color:"red",onClick:t[0]||(t[0]=r=>_())}),c(p,{flat:"",round:"",icon:"mdi-pencil-outline",onClick:f}),c(p,{flat:"",color:"primary",onClick:t[1]||(t[1]=r=>$(n.link.shortid))},{default:m(()=>[x(" Copy ")]),_:1})]),_:1})]),_:1}))}},G={__name:"LinkForm",setup(n){const{dialog:e}=S(),{vLinks:a}=q(),i=g(null),s=g(""),u=h(),o=async()=>{try{await u.createLink(s.value),s.value="",i.value.resetValidation()}catch(k){e(k.errors[0].msg)}};return(k,f)=>(d(),y(j,{onSubmit:P(o,["prevent"]),ref_key:"linkForm",ref:i},{default:m(()=>[c(D,{label:"Ingrese un link",modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=_=>s.value=_),rules:[Q(a)],"lazy-rules":""},null,8,["modelValue","rules"]),c(p,{type:"submit",label:"Agregar",color:"light-blue-8",class:"full-width q-mt-sm"})]),_:1},8,["onSubmit"]))}},J=b("h3",null,"Bienvenido",-1),K={key:1,class:"text-center"},te={__name:"IndexPage",setup(n){const e=h(),{links:a}=T(e),i=g(!1);return z(async()=>{try{await e.getLinks()}catch{H(()=>{i.value=!a.value.length})}}),(s,u)=>(d(),y(B,{padding:""},{default:m(()=>[J,c(G),i.value?w("",!0):(d(!0),N(U,{key:0},R(Q(a),o=>(d(),y(Z,{key:o._id,link:o},null,8,["link"]))),128)),i.value?(d(),N("h3",K,"Sin links")):w("",!0)]),_:1}))}};export{te as default};
